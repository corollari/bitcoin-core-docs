<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>reduce-traffic</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="pandoc.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <link rel='shortcut icon' href='favicon.png' />
</head>
<body>
<h1 id="reduce-traffic">Reduce Traffic</h1>
<p>Some node operators need to deal with bandwidth caps imposed by their ISPs.</p>
<p>By default, Bitcoin Core allows up to 125 connections to different peers, 10 of which are outbound. You can therefore, have at most 115 inbound connections. Of the 10 outbound peers, there can be 8 full-relay connections and 2 block-relay-only ones.</p>
<p>The default settings can result in relatively significant traffic consumption.</p>
<p>Ways to reduce traffic:</p>
<h2 id="1-use--maxuploadtargetmib-per-day">1. Use <code>-maxuploadtarget=&lt;MiB per day&gt;</code></h2>
<p>A major component of the traffic is caused by serving historic blocks to other nodes during the initial blocks download phase (syncing up a new node). This option can be specified in MiB per day and is turned off by default. This is <em>not</em> a hard limit; only a threshold to minimize the outbound traffic. When the limit is about to be reached, the uploaded data is cut by no longer serving historic blocks (blocks older than one week). Keep in mind that new nodes require other nodes that are willing to serve historic blocks.</p>
<p>Peers with the <code>download</code> permission will never be disconnected, although their traffic counts for calculating the target.</p>
<h2 id="2-disable-listening--listen0">2. Disable "listening" (<code>-listen=0</code>)</h2>
<p>Disabling listening will result in fewer nodes connected (remember the maximum of 10 outbound peers). Fewer nodes will result in less traffic usage as you are relaying blocks and transactions to fewer nodes.</p>
<h2 id="3-reduce-maximum-connections--maxconnectionsnum">3. Reduce maximum connections (<code>-maxconnections=&lt;num&gt;</code>)</h2>
<p>Reducing the maximum connected nodes to a minimum could be desirable if traffic limits are tiny. Keep in mind that bitcoin's trustless model works best if you are connected to a handful of nodes.</p>
<h2 id="4-turn-off-transaction-relay--blocksonly">4. Turn off transaction relay (<code>-blocksonly</code>)</h2>
<p>Forwarding transactions to peers increases the P2P traffic. To only sync blocks with other peers, you can disable transaction relay.</p>
<p>Be reminded of the effects of this setting.</p>
<ul>
<li>Fee estimation will no longer work.</li>
<li>It sets the flag "-walletbroadcast" to be "0", only if it is currently unset. Doing so disables the automatic broadcasting of transactions from wallet. Not relaying other's transactions could hurt your privacy if used while a wallet is loaded or if you use the node to broadcast transactions.</li>
<li>If a peer has the forcerelay permission, we will still receive and relay their transactions.</li>
<li>It makes block propagation slower because compact block relay can only be used when transaction relay is enabled.</li>
</ul>
</body>
</html>
